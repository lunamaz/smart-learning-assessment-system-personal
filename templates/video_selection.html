{% extends "base.html" %}

{% block title %}選擇課程影片 - {{ subject_name }}{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>
          <i class="fas fa-video text-primary me-2"></i>
          {{ subject_name }} - 選擇課程影片
        </h2>
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
          <i class="fas fa-arrow-left me-2"></i>返回學習中心
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-film text-success me-2"></i>
            {{ child.nickname }} 的 {{ subject_name }} 課程
          </h5>
        </div>
        <div class="card-body">
          {% if videos %}
          <div class="row">
            {% for video in videos %}
            <div class="col-lg-4 col-md-6 mb-4">
              <div class="card video-card h-100">
                <div class="card-body text-center">
                  <div class="video-icon mb-3">
                    <i class="fas fa-play-circle fa-4x text-primary"></i>
                  </div>
                  <h5 class="card-title">{{ video.display_name }}</h5>
                  <p class="text-muted mb-3">
                    <i class="fas fa-clock me-1"></i>課程影片
                  </p>
                  <a href="{{ url_for('study_with_video', subject=subject, video_filename=video.filename) }}"
                     class="btn btn-primary">
                    <i class="fas fa-play me-2"></i>開始學習
                  </a>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <div class="text-center py-5">
            <i class="fas fa-video-slash fa-3x text-muted mb-3"></i>
            <h4 class="text-muted">尚未上傳課程影片</h4>
            <p class="text-muted">請聯絡管理員上傳 {{ subject_name }} 的課程影片</p>
            <a href="{{ url_for('dashboard') }}" class="btn btn-primary mt-3">
              <i class="fas fa-arrow-left me-2"></i>返回學習中心
            </a>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.video-card { transition: all 0.3s ease; cursor: pointer; border: 2px solid #e8f4f8; }
.video-card:hover { transform: translateY(-8px); box-shadow: 0 8px 25px rgba(66,165,245,0.2); border-color: #42a5f5; }
.video-icon { transition: transform 0.3s ease; }
.video-card:hover .video-icon { transform: scale(1.1); }
.video-card .card-title { font-size: 1.1rem; font-weight: 600; color: #2c3e50; margin-bottom: 0.5rem; min-height: 2.5rem; display: flex; align-items: center; justify-content: center; }
@media (max-width: 768px) { .video-card .card-body { padding: 1.5rem; } .video-icon i { font-size: 3rem !important; } }
</style>
{% endblock %}
